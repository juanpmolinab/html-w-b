<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
    <title>manifest</title>
</head>
<body>
    <main>
        <div class="mainManifest">
            <div class="salir"  onclick="window.location.href='index.html';"></div>
            <div class="titleLM">
                <h2 class="titleLogo1"><img src="img/LOGOKAEK.png" alt="Logo de mi página" id="logoLM"></h2>
                <h2 class="titleLM1"></h2>
                <h2 class="titleLM2">LOAD <br>MANIFEST</h2>
                <h2 class="titleLogo2"><img src="img/logo-chip-mong.png" alt="Logo empresa" id="logoELM"></h2>
                
            </div>
            <div class="title2LM">
                <div class="title2LM1">Regitration:<div class="regist1"><input type="text" id="regist_2" class="name-value" placeholder="Registration" readonly></div></div>
                <div class="title2LM2">Date:<div class="date1"><input type="date" id="date_2" class="name-value" placeholder="Date" ></div></div>
                <div class="title2LM3">FROM:<div class="from1"><input type="text" id="from_2" class="name-value" placeholder="From" readonly></div></div>
                <div class="title2LM4">TO:<div class="to1"><input type="text" id="to_2" class="name-value" placeholder="To" readonly></div></div>
                <div class="flightTHour slrr1">
                        <div class="hourA">Departur time:<input type="time" id="date_2" class="name-value" placeholder="Departur time:" > <div class="hourA_2"></div></div>
                        <div class="hourB">Destination time:<input type="time" id="date_2" class="name-value" placeholder="Destination time:" ><div class="hourB_2"></div></div>
                </div>
                <div class="flightTTime slrr2">flight Time: <input type="time" id="date_2" class="name-value" placeholder="flight time:" ></div>
                <div class="flightTParameters slrr3">
                        <div class="parametersA">PA:<div class="paramA_2"></div></div>
                        <div class="parametersB">OAT:<div class="paramB_2"></div></div>
                </div>
                <div class="flightTperformance slrr4">
                        <div class="performanceA">OGE MAX WEIGHT:<div class="perfA_2"></div></div>
                        <div class="performanceB">IGE MAX WEIGHT:<div class="perfB_2"></div></div>
                </div>
                
            </div>
            <div class="weightDataLM">
                <div class="armLM">
                    <div class="blank">ARM DATA</div>
                    <div class="long">
                        <div class="long1">LONGITUDINAL</div>
                        <div class="long2">
                            <div class="longA">Mass[lbs]</div>
                            <div class="longB">Arm [in] </div>
                            <div class="longC">Moment[lbs.in]</div>
                        </div>
                    </div>
                    <div class="lat">
                        <div class="lat1">LATERAL</div>
                        <div class="lat2">
                            <div class="latA">Arm [in] </div>
                            <div class="latB">Moment[lbs.in]</div>
                        </div>
                    </div>
                </div>   
                <div class="HelicopterLM">
                    <div class="blanco1 slr1">Helicopter</div>
                    <div class="blanco2 slr2"></div>
                    <div class="blanco3 slr3"></div>
                    <div class="blanco4 slr4"></div>
                    <div class="blanco5 slr5">0</div>
                    <div class="blanco6 slr6"></div>
                </div> 
                <div class="pilotLM"> 
                    <div class="p1 slr1">Pilot Seat</div>
                    <div class="p2 slr2"></div>
                    <div class="p3 slr3">98</div>
                    <div class="p4 slr4"></div>
                    <div class="p5 slr5">14</div>
                    <div class="p6 slr6"></div>
                </div>
                <div class="cpLM">
                    <div class="cp1 slr1">Forwar Seat</div>
                    <div class="cp2 slr2"></div>
                    <div class="cp3 slr3">98</div>
                    <div class="cp4 slr4"></div>
                    <div class="cp5 slr5">-13</div>
                    <div class="cp6 slr6"></div>
                </div>
                <div class="lLM">
                    <div class="l1 slr1">Left Rear Seat</div>
                    <div class="l2 slr2"></div>
                    <div class="l3 slr3">135</div>
                    <div class="l4 slr4"></div>
                    <div class="l5 slr5">-18.5</div>
                    <div class="l6 slr6"></div>
                </div>
                <div class="cLM">
                    <div class="c1 slr1">Center Rear Seat</div>
                    <div class="c2 slr2"></div>
                    <div class="c3 slr3">135</div>
                    <div class="c4 slr4"></div>
                    <div class="c5 slr5">0</div>
                    <div class="c6 slr6"></div>
                </div>
                <div class="rLM">
                    <div class="r1 slr1">Right Rear Seat</div>
                    <div class="r2 slr2"></div>
                    <div class="r3 slr3">135</div>
                    <div class="r4 slr4"></div>
                    <div class="r5 slr5">18.5</div>
                    <div class="r6 slr6"></div>
                </div>
                <div class="cargoLM">
                    <div class="cargo1 slr1">Cargo</div>
                    <div class="cargo2 slr2" ></div>
                    <div class="cargo3 slr3">168</div>
                    <div class="cargo4 slr4"></div>
                    <div class="cargo5 slr5">0</div>
                    <div class="cargo6 slr6"></div>
                </div>
                <div class="hookLM">
                    <div class="hook1 slr1">External / hook</div>
                    <div class="hook2 slr2" >0</div>
                    <div class="hook3 slr3">165.1</div>
                    <div class="hook4 slr4"></div>
                    <div class="hook5 slr5">0</div>
                    <div class="hook6 slr6"></div>
                </div>
                <div class="zWeightLM">
                    <div class="zW1 slr1">ZFW</div>
                    <div class="zW2 slr2"></div>
                    <div class="zW3 slr3"></div>
                    <div class="zW4 slr4"></div>
                    <div class="zW5 slr5">0</div>
                    <div class="zW6 slr6"></div>
                </div>
                <div class="mFuelLM">
                    <div class="mF1 slr1">Main Fuel</div>
                    <div class="mF2 slr2"></div>
                    <div class="mF3 slr3"></div>
                    <div class="mF4 slr4"></div>
                    <div class="mF5 slr5">0</div>
                    <div class="mF6 slr6"></div>
                </div>
                <div class="TOWeightLM">
                    <div class="TW1 slr1">TOW</div>
                    <div class="TW2 slr2" ></div>
                    <div class="TW3 slr3"></div>
                    <div class="TW4 slr4"></div>
                    <div class="TW5 slr5">0</div>
                    <div class="TW6 slr6"></div>
                </div>
                <div class="lFuelLM">
                    <div class="lF1 slr1">Ldg. Fuel</div>
                    <div class="lF2 slr2" ></div>
                    <div class="lF3 slr3"></div>
                    <div class="lF4 slr4"></div>
                    <div class="lF5 slr5">0</div>
                    <div class="lF6 slr6"></div>
                </div>
                <div class="lWeightLM">
                    <div class="LW1 slr1">LW</div>
                    <div class="LW2 slr2" ></div>
                    <div class="LW3 slr3"></div>
                    <div class="LW4 slr4"></div>
                    <div class="LW5 slr5">0</div>
                    <div class="LW6 slr6"></div>
                </div>
            </div>
            <div class="signLM">
                <div class="sign">
                    <canvas id="canvasSign" width="300" height="150" style="border:1px solid #000;"></canvas>
                  </div>
                <div class="signName">Pilot Name</div>
            </div>
            
            <div class="grafic1LM">
                <canvas id="chartManifest"></canvas>
            </div>
            
            
            <div class="grafic2LM">
                <canvas id="chartLateral"></canvas>
            </div>
            <div class="manifest">
                <div class="manTitle">PASENGER MANIFEST</div>
                <div class="slrrr1">PILOT:<div class="man1"><input type="text" id="PS_2" class="name-value" placeholder="Name PS" readonly></div></div>
                <div class="slrrr2">PAX 1: <div class="man2"><input type="text" id="f1_2" class="name-value" placeholder="Name f1" readonly></div></div>
                <div class="slrrr3">PAX 2: <div class="man3"><input type="text" id="RL_2" class="name-value" placeholder="Name RL" readonly></div></div>
                <div class="slrrr4">PAX 3: <div class="man4"><input type="text" id="CC_2" class="name-value" readonly></div></div>
                <div class="slrrr5">PAX 4: <div class="man5"><input type="text" id="R_2" class="name-value" placeholder="Name R" readonly></div></div>
            </div>
            <div class="butoons">
                
                <div class="btoon2 slrrrr2" onclick="limpiarFirma()">DELETE SIGNATURE</div>
                <div id="btnImprimir" class="btoon3 slrrrr3">SEND / PRINT</div>
            </div>
            
        </div>
    </main>

    
    
    <script src="w&b.js" defer></script>

<script>
    // sumar los momentos para calcular el brazo longitudinal
    function sumarValoresClases() {
        function limpiarYConvertirNumero(texto) {
            if (!texto) return 0;
            texto = texto.trim().replace(/[^\d.,-]/g, '');
            if (texto.includes(',')) {
                texto = texto.replace(',', '.');
            }
            const numero = parseFloat(texto);
            return isNaN(numero) ? 0 : numero;
        }
    
        const clases = ["blanco4", "p4", "cp4", "l4", "c4", "r4", "cargo4", "hook4"];
        let suma = 0;
    
        clases.forEach(clase => {
            const elemento = document.querySelector(`.${clase}`);
            if (elemento) {
                const valorTexto = elemento.textContent;
                const numero = limpiarYConvertirNumero(valorTexto);
                suma += numero;
            }
        });
    
            
        // Obtener el valor de .mF2.slr2
        let valorExtraElemento = document.querySelector(".mF4");
        let valorExtra = valorExtraElemento ? parseFloat(valorExtraElemento.textContent.trim()) || 0 : 0;
    
        // Calcular suma2
        let suma2 = suma + valorExtra;
    
        let valorExtraElemento2 = document.querySelector(".lF4");
        let valorExtra2 = valorExtraElemento2 ? parseFloat(valorExtraElemento2.textContent.trim()) || 0 : 0;
    
        let suma3 = suma + valorExtra2;
    
    
        const resultado = document.querySelector(".zW4");
        if (resultado) {
            resultado.textContent = suma.toFixed(1);
        }
        
        // Mostrar el resultado en .TW2.slr2
        let resultadoSuma2Elemento = document.querySelector(".TW4");
        if (resultadoSuma2Elemento) {
            resultadoSuma2Elemento.textContent = suma2.toFixed(1);
        }
    
        let resultadoSuma3Elemento = document.querySelector(".LW4");
        if (resultadoSuma3Elemento) {
            resultadoSuma3Elemento.textContent = suma3.toFixed(1);
        }
        
    }

// Ejecutar cuando todo esté listo
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(sumarValoresClases, 50);  // espera 200ms
});


// sumar los momentos para calcular el brazo lateral
function sumarValoresClasesLateral() {
    function limpiarYConvertirNumero(texto) {
        if (!texto) return 0;
        texto = texto.trim().replace(/[^\d.,-]/g, '');
        if (texto.includes(',')) {
            texto = texto.replace(',', '.');
        }
        const numero = parseFloat(texto);
        return isNaN(numero) ? 0 : numero;
    }

    const clases = ["blanco6", "p6", "cp6", "l6", "c6", "r6", "cargo6", "hook6"];
    let suma = 0;

    clases.forEach(clase => {
        const elemento = document.querySelector(`.${clase}`);
        if (elemento) {
            const valorTexto = elemento.textContent;
            const numero = limpiarYConvertirNumero(valorTexto);
            suma += numero;
        }
    });

        
    // Obtener el valor de .mF2.slr2
    let valorExtraElemento = document.querySelector(".mF6");
    let valorExtra = valorExtraElemento ? parseFloat(valorExtraElemento.textContent.trim()) || 0 : 0;

    // Calcular suma2
    let suma2 = suma + valorExtra;

    let valorExtraElemento2 = document.querySelector(".lF6");
    let valorExtra2 = valorExtraElemento2 ? parseFloat(valorExtraElemento2.textContent.trim()) || 0 : 0;

    let suma3 = suma + valorExtra2;


    const resultado = document.querySelector(".zW6");
    if (resultado) {
        resultado.textContent = suma.toFixed(1);
    }
    
    // Mostrar el resultado en .TW2.slr2
    let resultadoSuma2Elemento = document.querySelector(".TW6");
    if (resultadoSuma2Elemento) {
        resultadoSuma2Elemento.textContent = suma2.toFixed(1);
    }

    let resultadoSuma3Elemento = document.querySelector(".LW6");
    if (resultadoSuma3Elemento) {
        resultadoSuma3Elemento.textContent = suma3.toFixed(1);
    }
    
}

// Ejecutar cuando todo esté listo
document.addEventListener('DOMContentLoaded', function() {
setTimeout(sumarValoresClasesLateral, 50);  // espera 50ms
});


// calcular el brazo longitudinal y lateral
function dividirYMostrar(numeradorClase, denominadorClase, resultadoClase) {
    function limpiarYConvertirNumero(texto) {
        if (!texto) return 0;
        texto = texto.trim().replace(/[^\d.,-]/g, '');
        if (texto.includes(',')) {
            texto = texto.replace(',', '.');
        }
        const numero = parseFloat(texto);
        return isNaN(numero) ? 0 : numero;
    }

    const numeradorElemento = document.querySelector(`.${numeradorClase}`);
    const denominadorElemento = document.querySelector(`.${denominadorClase}`);
    const resultadoElemento = document.querySelector(`.${resultadoClase}`);

    if (numeradorElemento && denominadorElemento && resultadoElemento) {
        const numerador = limpiarYConvertirNumero(numeradorElemento.textContent);
        const denominador = limpiarYConvertirNumero(denominadorElemento.textContent);

        if (denominador !== 0) {
            const resultado = numerador / denominador;
            resultadoElemento.textContent = resultado.toFixed(1); // 1 decimal
        } else {
            resultadoElemento.textContent = "∞"; // O podrías poner "0" o "Error"
        }
    } else {
        console.error(`No se encontró alguna de las clases: ${numeradorClase}, ${denominadorClase} o ${resultadoClase}`);
    }
}

// Ahora simplemente ejecutas:

document.addEventListener('DOMContentLoaded', function() {
    setTimeout(function() {
        dividirYMostrar('zW4', 'zW2', 'zW3');
        dividirYMostrar('TW4', 'TW2', 'TW3');
        dividirYMostrar('LW4', 'LW2', 'LW3');
        dividirYMostrar('zW6', 'zW2', 'zW5');
        dividirYMostrar('TW6', 'TW2', 'TW5');
        dividirYMostrar('LW6', 'LW2', 'LW5');
    }, 100);
});

</script>


<script>
    let myChart1;
    
    function limpiarYConvertirNumero(texto) {
        if (!texto) return 0;
        texto = texto.toString().trim().replace(/[^\d.,-]/g, '');
        if (texto.includes(',')) {
            texto = texto.replace(',', '.');
        }
        const numero = parseFloat(texto);
        return isNaN(numero) ? 0 : numero;
    }
    
    function grafic() {
        // Obtener valores para el gráfico y limpiarlos
        const takeoffW = limpiarYConvertirNumero(document.querySelector('.TW2').innerText);
        const landingW = limpiarYConvertirNumero(document.querySelector('.LW2').innerText);
        const zeroW = limpiarYConvertirNumero(document.querySelector('.zW2').innerText);
        
        const takeoffArm = limpiarYConvertirNumero(document.querySelector('.TW3').innerText);
        const landingArm = limpiarYConvertirNumero(document.querySelector('.LW3').innerText);
        const zeroArm = limpiarYConvertirNumero(document.querySelector('.zW3').innerText);
        
    
        // Datos para el gráfico de dispersión
        const newData = [
            { x: takeoffArm, y: takeoffW, backgroundColor: 'orange', borderColor: 'orange', label: 'Total' },
            { x: landingArm, y: landingW, backgroundColor: 'green', borderColor: 'green', label: 'Landing' },
            { x: zeroArm, y: zeroW, backgroundColor: 'blue', borderColor: 'blue', label: 'Zero' }
        ];
    
        // Puntos del polígono (zona límite)
        const polygonData = [
            { x: 171.5, y: 2234 }, { x: 170, y: 2234 }, { x: 161.2, y: 2500 }, { x: 161.2, y: 3200 },
            { x: 161.6, y: 3680 }, { x: 169.9, y: 3680 }, { x: 171.5, y: 2600 }, { x: 171.5, y: 2234 }
        ];
    
        const polygonExternalLoad = [
            { x: 161.6, y: 3680 }, { x: 162.2, y: 4475 }, { x: 169, y: 4475 },
            { x: 169.9, y: 3680 }, { x: 161.6, y: 3680 }
        ];
    
        const polygonAftCG = [
            { x: 171.5, y: 2234 }, { x: 170, y: 2234 }, { x: 168.4, y: 3680 }, { x: 168.1, y: 4475 },
            { x: 169, y: 4475 }, { x: 169.9, y: 3680 }, { x: 171.5, y: 2600 }, { x: 171.5, y: 2234 }
        ];
    
        const data = {
            datasets: [
                {
                    label: 'Max Weight',
                    data: newData,
                    backgroundColor: newData.map(point => point.backgroundColor),
                    borderColor: newData.map(point => point.borderColor),
                    borderWidth: 1,
                    pointRadius: 5,
                    datalabels: {
                        color: 'grey',
                        display: true,
                        formatter: value => value.label
                    }
                },
                {
                    data: polygonData,
                    backgroundColor: 'rgba(192, 75, 75, 0.2)',
                    borderColor: 'rgba(192, 75, 75, 1)',
                    borderWidth: 2,
                    fill: true,
                    pointRadius: 0,
                    type: 'line',
                    tension: 0,
                    datalabels: { display: false }
                },
                {
                    data: polygonExternalLoad,
                    backgroundColor: 'rgba(75, 75, 192, 0.2)',
                    borderColor: 'grey',
                    borderWidth: 2,
                    fill: true,
                    pointRadius: 0,
                    type: 'line',
                    tension: 0,
                    datalabels: { display: false }
                },
                {
                    data: polygonAftCG,
                    backgroundColor: 'rgba(75, 75, 192, 0.9)',
                    borderColor: 'rgba(75, 75, 192, 1)',
                    borderWidth: 2,
                    fill: true,
                    pointRadius: 0,
                    type: 'line',
                    tension: 0,
                    datalabels: { display: false }
                }
            ]
        };
    
        const config = {
            type: 'scatter',
            data: data,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    datalabels: { display: false }
                },
                scales: {
                    x: {
                        type: 'linear',
                        position: 'bottom',
                        min: 158,
                        max: 174,
                        title: { display: true, text: 'CG (inches)' }
                    },
                    x1: {
                        type: 'linear',
                        position: 'top',
                        min: 4022,
                        max: 4420,
                        title: { display: true, text: 'LONGITUDINAL' }
                    },
                    y: {
                        min: 2000,
                        max: 4800,
                        title: { display: true, text: 'Weight (lbs)' }
                    },
                    y1: {
                        position: 'right',
                        min: 910,
                        max: 2175,
                        title: { display: true, text: 'Weight (kg)' }
                    }
                }
            }
        };
    
        function createOrUpdateChart(canvasId, chartVar) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return chartVar;
    
            const ctx = canvas.getContext('2d');
    
            if (chartVar) {
                chartVar.data.datasets[0].data = newData;
                chartVar.data.datasets[1].data = polygonData;
                chartVar.data.datasets[2].data = polygonExternalLoad;
                chartVar.data.datasets[3].data = polygonAftCG;
                chartVar.update();
            } else {
                chartVar = new Chart(ctx, config);
            }
    
            return chartVar;
        }
    
        myChart1 = createOrUpdateChart('chartManifest', myChart1);
    }
    
    document.addEventListener('DOMContentLoaded', function() {
        setTimeout(grafic, 200);
    });
    </script>

    
    <script>
        let myChart2;
        
        function limpiarYConvertirNumero(texto) {
            if (!texto) return 0;
            texto = texto.toString().trim().replace(/[^\d.,-]/g, '');
            if (texto.includes(',')) {
                texto = texto.replace(',', '.');
            }
            const numero = parseFloat(texto);
            return isNaN(numero) ? 0 : numero;
        }
        
        function grafic2() {
            // Obtener valores para el gráfico y limpiarlos
            const takeoffW = limpiarYConvertirNumero(document.querySelector('.TW2').innerText);
            const landingW = limpiarYConvertirNumero(document.querySelector('.LW2').innerText);
            const zeroW = limpiarYConvertirNumero(document.querySelector('.zW2').innerText);
            
            const takeoffArm = limpiarYConvertirNumero(document.querySelector('.TW5').innerText);
            const landingArm = limpiarYConvertirNumero(document.querySelector('.LW5').innerText);
            const zeroArm = limpiarYConvertirNumero(document.querySelector('.zW5').innerText);
            
        
            // Datos para el gráfico de dispersión
            const newData = [
                { x: takeoffArm, y: takeoffW, backgroundColor: 'orange', borderColor: 'orange', label: 'Total' },
                { x: landingArm, y: landingW, backgroundColor: 'green', borderColor: 'green', label: 'Landing' },
                { x: zeroArm, y: zeroW, backgroundColor: 'blue', borderColor: 'blue', label: 'Zero' }
            ];
        
            // Puntos del polígono (zona límite)
            const polygonData = [
                { x: -1.7, y: 2234 }, { x: -1.7, y: 2700 }, { x: -1.3, y: 3680 }, { x: 2.1, y: 3680 },
                { x: 2.5, y: 3155 }, { x: 2.5, y: 2234 }, { x: -1.7, y: 2234 }
            ];
        
            const polygonExternalLoad = [
                { x: -1.3, y: 3680 }, { x: -1.0, y: 4475 }, { x: 1.7, y: 4475 },
                { x: 2.1, y: 3680 }, { x: -1.3, y: 3680 }
            ];
        
                   
            const data = {
                datasets: [
                    {
                        label: 'Max Weight',
                        data: newData,
                        backgroundColor: newData.map(point => point.backgroundColor),
                        borderColor: newData.map(point => point.borderColor),
                        borderWidth: 1,
                        pointRadius: 5,
                        datalabels: {
                            color: 'grey',
                            display: true,
                            formatter: value => value.label
                        }
                    },
                    {
                        data: polygonData,
                        backgroundColor: 'rgba(192, 75, 75, 0.2)',
                        borderColor: 'rgba(192, 75, 75, 1)',
                        borderWidth: 2,
                        fill: true,
                        pointRadius: 0,
                        type: 'line',
                        tension: 0,
                        datalabels: { display: false }
                    },
                    {
                        data: polygonExternalLoad,
                        backgroundColor: 'rgba(75, 75, 192, 0.2)',
                        borderColor: 'grey',
                        borderWidth: 2,
                        fill: true,
                        pointRadius: 0,
                        type: 'line',
                        tension: 0,
                        datalabels: { display: false }
                    },
                    
                ]
            };
        
            const config = {
                type: 'scatter',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        datalabels: { display: false }
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            min: -5,
                            max: 5,
                            title: { display: true, text: 'CG (inches)' }
                        },
                        x1: {
                            type: 'linear',
                            position: 'top',
                            min: -130,
                            max: 130,
                            title: { display: true, text: 'LATERAL' }
                        },
                        y: {
                            min: 2000,
                            max: 4800,
                            title: { display: true, text: 'Weight (lbs)' }
                        },
                        y1: {
                            position: 'right',
                            min: 910,
                            max: 2175,
                            title: { display: true, text: 'Weight (kg)' }
                        }
                    }
                }
            };
        
            function createOrUpdateChart(canvasId, chartVar) {
                const canvas = document.getElementById(canvasId);
                if (!canvas) return chartVar;
        
                const ctx = canvas.getContext('2d');
        
                if (chartVar) {
                    chartVar.data.datasets[0].data = newData;
                    chartVar.data.datasets[1].data = polygonData;
                    chartVar.data.datasets[2].data = polygonExternalLoad;
                    chartVar.data.datasets[3].data = polygonAftCG;
                    chartVar.update();
                } else {
                    chartVar = new Chart(ctx, config);
                }
        
                return chartVar;
            }
        
            myChart2 = createOrUpdateChart('chartLateral', myChart2);
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(grafic2, 200);
        });

        document.addEventListener('DOMContentLoaded', function() {
            const botonImprimir = document.getElementById('btnImprimir');
            
            botonImprimir.addEventListener('click', function() {
                window.print();
            });
        });
        
        </script>    
        <script>
            const canvas = document.getElementById('canvasSign');
            const ctx = canvas.getContext('2d');
            let dibujando = false;
            let firmaGuardada = null; // Aquí podríamos guardar la firma si queremos
            
            // Ajustar tamaño real del canvas
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            // Dibujar
            canvas.addEventListener('mousedown', empezarDibujo);
            canvas.addEventListener('mouseup', terminarDibujo);
            canvas.addEventListener('mousemove', dibujar);
            
            canvas.addEventListener('touchstart', empezarDibujo);
            canvas.addEventListener('touchend', terminarDibujo);
            canvas.addEventListener('touchmove', dibujar);
            
            function empezarDibujo(e) {
              dibujando = true;
              ctx.beginPath();
              moverCursor(e);
            }
            
            function terminarDibujo() {
              dibujando = false;
              guardarFirma(); // Cuando terminan de dibujar, guardamos la firma
            }
            
            function dibujar(e) {
              if (!dibujando) return;
              e.preventDefault();
              moverCursor(e, true);
            }
            
            function moverCursor(e, dibujar = false) {
              let x, y;
              if (e.touches) {
                x = e.touches[0].clientX - canvas.getBoundingClientRect().left;
                y = e.touches[0].clientY - canvas.getBoundingClientRect().top;
              } else {
                x = e.clientX - canvas.getBoundingClientRect().left;
                y = e.clientY - canvas.getBoundingClientRect().top;
              }
            
              if (dibujar) {
                ctx.lineTo(x, y);
                ctx.stroke();
              } else {
                ctx.moveTo(x, y);
              }
            }
            
            function guardarFirma() {
              firmaGuardada = canvas.toDataURL(); // Guardamos la firma en base64
              console.log('Firma guardada:', firmaGuardada);
            }
            
            function limpiarFirma() {
              ctx.clearRect(0, 0, canvas.width, canvas.height);
              firmaGuardada = null; // Borrar también la firma guardada
              console.log('Firma borrada');
            }
            </script>
            

</body>
</html>

